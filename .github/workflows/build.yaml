name: Build Images
on:
  pull_request:
jobs:
  build:
    runs-on: ubuntu-latest
    env:
      REGISTRY_PASSWORD: ${{ secrets.REGISTRY_PASSWORD }}
      REGISTRY_USERNAME: ${{ secrets.REGISTRY_USERNAME }}
    steps:
      - name: checkout
        uses: actions/checkout@v3
      # Setting up Docker Buildx with docker-container driver is required
      # at the moment to be able to use a subdirectory with Git context
      - name: use-setup-buildx-action
        uses: docker/setup-buildx-action@v2
      - name: build-image
        run: make build-jenkins-all